(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-dapp-test3"],{3660:function(e,t,n){"use strict";n.r(t);var o=n("81d9"),r=n.n(o);for(var c in o)"default"!==c&&function(e){n.d(t,e,(function(){return o[e]}))}(c);t["default"]=r.a},"6a4f":function(e,t,n){"use strict";n.r(t);var o=n("ffc7"),r=n("3660");for(var c in r)"default"!==c&&function(e){n.d(t,e,(function(){return r[e]}))}(c);var a,i=n("f0c5"),s=Object(i["a"])(r["default"],o["b"],o["c"],!1,null,"4a65e462",null,!1,o["a"],a);t["default"]=s.exports},"81d9":function(e,t,n){"use strict";(function(e){var o=n("4ea4");n("a15b"),n("ac1f"),n("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,c=o(n("9167")),a={name:"test",data:function(){return{hex:null,address:null,index:1,zindex:0,yIndex:132,total:0,ceng:1,people:1,frist:"TCagiRPuDSzjtv1Ex3HgNFkaXbVDkHriRJ",fristPrivateKey:"6aea47b7e70b602052a32780c604902d3a2c6e26bc9be8e1036b60621a5c278a",addresslist:[],xiaAddress:null,preindex:1,preyindex:0,preymax:10,prenumber:8,preUser:["TW5BbcT3ZuYPoCutHUVLk9j4ZUdFCobJkz"],preUserPer:["584a0891bc808f240552bf130db0ea524597f95c4d8910b488a330e8691fc55c"]}},created:function(){r=this;var e=c.default.providers.HttpProvider,t=new e("http://bikeworld.cc:9090/"),n=new c.default(t,t);r.$common.tronWeb=n},methods:{initContractContract:function(){uni.request({url:"/static/abi/GAME.json",method:"GET",success:function(e){r.$common.contractContract=r.$common.tronWeb.contract(e.data,r.$common.contract_contract_address),r.initTokenContract()}})},initTokenContract:function(){uni.request({url:"/static/abi/FPT.json",method:"GET",success:function(e){r.$common.tokenContract=r.$common.tronWeb.contract(e.data,r.$common.contract_address),r.plpreShip()}})},test:function(){r.test2(r.frist,r.people,r.fristPrivateKey)},test6:function(){r.test22(r.frist,r.total,r.fristPrivateKey)},test2:function(t,n,o){e.log("第",r.index,"个"),r.$common.tronWeb.setPrivateKey(o);var c=39;c=r.index<5?26e4:r.index<8?34e4:4e5,uni.request({url:"/static/abi/FPT.json",method:"GET",success:function(a){r.$common.tokenContract=r.$common.tronWeb.contract(a.data,r.$common.contract_address);var i,s,u=r.$common.tronWeb.defaultAddress.base58;e.log("打钱地址",u),r.$common.tronWeb.createAccount().then((function(a){e.log(a),i=a.address.base58,s=a.privateKey,e.log("玩家",i),e.log("玩家私钥",s);var u={address:null,privateKey:null};u["address"]=i,u["privateKey"]=s,r.addresslist.push(u),r.$common.tronWeb.trx.sendTransaction(i,r.toSun(c+1e3)).then((function(a){a.result&&(r.$common.tronWeb.setPrivateKey(s),e.log("推荐人为",t,"购买人为",r.$common.tronWeb.defaultAddress.base58),r.$common.tokenContract.buy(t).send({feeLimit:1e8,callValue:r.toSun(c),shouldPollResponse:!0},(function(c,a){if(c)e.log(c);else{if(r.index==r.people)return e.log("购买循环结束"),r.index=0,void r.$common.tronWeb.createAccount().then((function(t){i=t.address.base58,s=t.privateKey,e.log("需要转账的地址",i)}));r.index++,e.log("下一个开始"),r.test2(t,n,o)}})))}))}))}})},test22:function(t,n,o){e.log("第",r.ceng,"层"),e.log("第",r.index,"个"),r.$common.tronWeb.setPrivateKey(r.fristPrivateKey),uni.request({url:"/static/abi/FPT.json",method:"GET",success:function(c){r.$common.tokenContract=r.$common.tronWeb.contract(c.data,r.$common.contract_address),r.$common.tronWeb.createAccount().then((function(c){var a=c.address.base58,i=c.privateKey;e.log("玩家",a),e.log("玩家私钥",i);var s=r.toSun(6e4),u=r.toSun(5e4);r.$common.tronWeb.trx.sendTransaction(a,s).then((function(c){c?r.$common.tokenContract.methods.transfer(a,r.toSun(470)).send({},(function(c,s){if(e.log(s),c||0==s)return e.log(c),void e.log("转账失败");uni.request({url:"/static/abi/GAME.json",method:"GET",success:function(c){e.log(i),r.$common.tronWeb.setPrivateKey(i),r.$common.contractContract=r.$common.tronWeb.contract(c.data,r.$common.contract_contract_address),e.log("推荐人为",t,"购买人为",r.$common.tronWeb.defaultAddress.base58),r.$common.contractContract.join(t).send({feeLimit:1e9,callValue:u,shouldPollResponse:!0},(function(c,s){c&&(e.log(c),e.log("参与游戏报错结束")),e.log(s),e.log("进入下一个"),r.index==r.yIndex&&(r.ceng++,r.index=0,t=a,o=i,r.ceng>n)?e.log("循环结束"):(r.zindex++,r.index++,r.test22(t,n,o))}))}})})):e.log("激活失败")}))}))}})},creataddress:function(){r.$common.tronWeb.createAccount().then((function(t){var n=t.address.base58,o=t.privateKey;e.log("需要转账的地址",n,"--私钥",o)}))},preShip:function(){e.log(r.preindex),uni.request({url:"/static/abi/GAME.json",method:"GET",success:function(t){r.$common.tronWeb.setPrivateKey(r.preUserPer[r.preindex]),r.$common.contractContract=r.$common.tronWeb.contract(t.data,r.$common.contract_contract_address);var n=r.preindex-1;e.log("上级"+r.preUser[n]+"推荐了"+r.preUser[r.preindex]),r.$common.contractContract.methods.preShip(r.preUser[n]).send({feeLimit:1e8,shouldPollResponse:!0},(function(t,n){if(t)return e.log(t),void e.log("排网失败");r.$common.contractContract.join(address).send({feeLimit:1e9,callValue:buy_num,shouldPollResponse:!0},(function(t,n){t&&(e.log(t),e.log("参与游戏报错结束")),r.preindex++,e.log("下一个"),r.preindex>r.prenumber?e.log("排网结束"):r.preShip()}))}))}})},plpreShip:function(){e.log("当前第"+r.preyindex+"层"),e.log("当前第"+r.preindex+"个");var t=r.toSun(5e4);r.$common.tronWeb.setPrivateKey(r.preUserPer[0]);var n,o,c=r.$common.tronWeb.defaultAddress.base58;e.log("打钱地址",c),r.$common.tronWeb.createAccount().then((function(c){e.log(c),n=c.address.base58,o=c.privateKey,e.log("玩家",n),e.log("玩家私钥",o),r.$common.tronWeb.trx.sendTransaction(n,r.toSun(6e4)).then((function(c){c.result&&r.$common.tokenContract.methods.transfer(n,r.toSun(470)).send({},(function(c,a){if(e.log(a),c||0==a)return e.log(c),void e.log("转账失败");r.$common.tronWeb.setPrivateKey(o),e.log("下级为",n,"上级为",r.preUser[0]),r.$common.contractContract.methods.preShip(r.preUser[0]).send({feeLimit:1e9,shouldPollResponse:!0},(function(n,o){if(n)return e.log(n),void e.log("排网失败");r.$common.contractContract.join().send({feeLimit:1e9,callValue:t,shouldPollResponse:!0},(function(t,n){t&&(e.log(t),e.log("参与游戏报错结束")),r.preindex++,e.log("下一个"),r.preindex>r.prenumber?e.log("循环结束"):r.plpreShip()}))}))}))}))}))},hexFun:function(){var e=r.address.replace("0x","41");r.hex=r.fromHex(e)},fromSun:function(e){return r.$common.tronWeb.fromSun(e)},toSun:function(e){return r.$common.tronWeb.toSun(e)},fromHex:function(e){return r.$common.tronWeb.address.fromHex(e)}}};t.default=a}).call(this,n("5a52")["default"])},ffc7:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return o}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-view",{},[n("v-uni-input",{attrs:{type:"text",value:""},model:{value:e.people,callback:function(t){e.people=t},expression:"people"}}),n("v-uni-button",{attrs:{type:"default"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.test()}}},[e._v("test2")])],1),n("v-uni-view",{},[n("v-uni-input",{attrs:{type:"text",value:""},model:{value:e.total,callback:function(t){e.total=t},expression:"total"}}),n("v-uni-button",{attrs:{type:"default"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.test6()}}},[e._v("test22")])],1),n("v-uni-view",{},[n("v-uni-input",{attrs:{type:"text",value:""},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}}),n("v-uni-button",{attrs:{type:"default"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.hexFun()}}},[e._v("地址转换后")]),n("v-uni-view",{},[e._v(e._s(e.hex))])],1),n("v-uni-view",{},[n("v-uni-input",{attrs:{type:"text",value:""},model:{value:e.prenumber,callback:function(t){e.prenumber=t},expression:"prenumber"}}),n("v-uni-button",{attrs:{type:"default"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.preShip()}}},[e._v("preShip")]),n("v-uni-text",[e._v("当前操作地址:"+e._s(e.preUser[e.preindex]))])],1),n("v-uni-view",{},[n("v-uni-input",{attrs:{type:"text",value:""},model:{value:e.prenumber,callback:function(t){e.prenumber=t},expression:"prenumber"}}),n("v-uni-button",{attrs:{type:"default"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.initContractContract()}}},[e._v("preShip")]),n("v-uni-text",[e._v("当前层数:"+e._s(e.preyindex))]),n("v-uni-text",[e._v("当前位置:"+e._s(e.preindex))])],1)],1)},c=[]}}]);